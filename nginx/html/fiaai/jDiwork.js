"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var d,c,o,l,t,i,a,n,f,r,s,e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this;e.jDiwork=(d={},c={},o=!{},l=0,t="JDIWORK",i=function(e){try{var n=e.type.split(":"),o=n[0],t=n[1],i=void 0!==e.data&&e.data,a=d[o],c=void 0===e.destroy||e.destroy}catch(e){return void console.log(e)}if(a&&a[t]){clearTimeout(a[t].timer);var l=a[t].callback(i);return c&&delete a[t],l}},a=function(e,n,o){o=void 0===o||o;var t=d[e],i=++l,a={callback:n,timer:o?setTimeout(function(){n&&n(!1),delete t[i]},500):0};return t?t[i]=a:((t={})[i]=a,d[e]=t),e+":"+i},n=function(e){try{var n=(e=event.type.split(":"))[0],o=e[1],t=d[n]}catch(e){return void console.log(e)}if(t&&o&&t[o])t[o].timer&&clearTimeout(t[o].timer),delete t[o];else if(t&&!o)for(var i in t)t[i].timer&&clearTimeout(t[o].timer),delete t[i]},f=function(e,n){var o=c[e];o?o.push(n):c[e]=[n]},r=function(o){o.messType=t,"_WORKBENCH_"===window.name?window.postMessage(JSON.stringify(o),"*"):function e(n){n!==window.top&&(n.parent.postMessage(JSON.stringify(o),"*"),e(n.parent))}(window)},s=function(){r({callbackId:"closeDialog"}),n(this.onClose),this.btns&&this.btns.forEach(function(e){n(e.fun)}),n("openDialog")},window.addEventListener("DOMContentLoaded",function(){o=!0},!1),window.addEventListener("message",function(e){var n=e.data;if(n){try{"string"==typeof n&&(n=JSON.parse(n))}catch(e){return void console.log(e)}n&&"object"===(void 0===n?"undefined":_typeof(n))&&n.type&&(n.type.indexOf(":")<0?function(e){try{var n=e.type;var o=e.data;var t=c[n]}catch(e){console.log(e);return}if(t&&t.length){for(var i=0,a=t.length;i<a;i++){t[i](o)}}}:i)(n)}},!1),window.addEventListener("click",function(){r({callbackId:"rootClick"})},!1),{ready:function(e){var n={type:a("ready",e)};if(o){i(n)}else{setTimeout(function(){i(n)},0)}},openService:function(e,n,o,t){r({detail:{serviceCode:e,data:n,type:o},callbackId:a("openService",t||function(){})})},reOpenService:function(e,n){r({detail:e,callbackId:a("reOpenService",n||function(){})})},recordLog:function(e,n,o){r({detail:{serviceCode:e,data:n},callbackId:a("recordLog",o||function(){})})},renewalPing:function(){r({detail:{},callbackId:a("renewalPing",function(){})})},dismissEnterprise:function(e){r({detail:{},callbackId:a("dismissEnterprise",e||function(){})})},updateService:function(e,n,o){r({detail:{serviceCode:e,data:n},callbackId:a("updateService",o||function(){})})},getContext:function(e){r({callbackId:a("getContext",e,false)})},onData:function(e,n){if(typeof e==="function"&&typeof n==="undefined"){n=e;e=undefined}if(e&&window.diworkTools){window.diworkTools.on(e,function(e){n(e)})}else{f("data",n)}},switchChatTo:function(e,n){if(e.id||e.yht_id){r({detail:e,callbackId:a("switchChatTo",n||function(){})})}else{console.log("function switchChatTo need id or yht_id")}},refreshUserInfo:function(e){r({callbackId:a("refreshUserInfo",e||function(){})})},showDialog:function(e,n){r({detail:e,callbackId:a("showDialog",n||function(){})})},closeDialogNew:function(e,n){r({detail:e,callbackId:a("closeDialogNew",n||function(){})})},showTabs:function(e,n){r({detail:{serviceCode:e},callbackId:a("showTabs",n||function(){})})},openWin:function(e,n){r({detail:e,callbackId:a("openWin",n||function(){})})},closeWin:function(e){r({callbackId:a("closeWin",e||function(){})})},getData:function(e,n){r({detail:e,callbackId:a("getData",n,false)})},getState:function(e){r({callbackId:a("getState",e,false)})},openFrame:function(e,n){r({detail:e,callbackId:a("openFrame",n||function(){})})},closeFrame:function(e){r({callbackId:a("closeFrame",e||function(){})})},openServicePublish:function(e,n){r({detail:e,callbackId:a("openServicePublish",n||function(){})})},closeServicePublish:function(e){r({callbackId:a("closeServicePublish",e||function(){})})},getPageParam:function(e){r({callbackId:a("getPageParam",e,false)})},openHomePage:function(e,n){r({detail:e,callbackId:a("openHomePage",n||function(){})})},onGroupUpdated:function(e){r({callbackId:a("onGroupUpdated",e,false)})},getImGroupData:function(e){r({callbackId:a("getImGroupData",e||function(){})})},openNotifyCenter:function(e,n){r({detail:e,callbackId:a("openNotifyCenter",n||function(){})})},onUnReadedNumChanged:function(e){r({callbackId:a("onUnReadedNumChanged",e,false)})},checkServiceOpen:function(e,n){r({detail:{serviceCode:e},callbackId:a("checkServiceOpen",n)})},postDataToService:function(e,n,o){r({detail:{serviceCode:e,data:n},callbackId:a("postDataToService",o)})},execScript:function(e,n){r({detail:e,callbackId:a("execScript",n||function(){})})},getHostForGlobal:function(e,n){r({detail:e,callbackId:a("getHostForGlobal",n,false)})},openDialog:function(t,e){if(t.btns&&t.btns.length){t.btns=t.btns.map(function(e,n){if(e.fun){var o=e.fun;e.fun=a("dialogBtnClick",function(){o(s.bind(t))},false)}else{e.fun=a("dialogBtnClick",s.bind(t),false)}return e})}if(t.onClose){var n=t.onClose;t.onClose=a("dialogOnClose",function(){if(n()){s.call(t)}},false)}else{t.onClose=a("dialogOnClose",s.bind(t),false)}r({detail:{options:t},callbackId:a("openDialog",e)})},addBrm:function(e,n){r({detail:{name:e,url:window.location.href},callbackId:a("addBrm",n)})},popBrm:function(e,n){r({detail:{index:e,url:window.location.href},callbackId:a("popBrm",n)})},getBrm:function(e){r({callbackId:a("getBrm",e)})},openMessage:function(e,n){r({detail:e,callbackId:a("openMessage",n||function(){})})},singleRender:function(e){var o={messType:t+"-SINGLE",render:e||true};if(window.name==="_WORKBENCH_"){window.postMessage(JSON.stringify(o),"*")}else{var n=function e(n){if(n!==window.top){n.parent.postMessage(JSON.stringify(o),"*");e(n.parent)}else{}};n(window)}}})}();